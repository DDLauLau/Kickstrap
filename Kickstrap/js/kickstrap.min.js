function consoleLogger(e,t,n){var r="Kickstrap: ";if(kickstrap.opts.console)if(n)console.log([e,n]);else switch(t){case"warn":console.warn(r+e);break;case"error":console.error(r+e);break;default:console.log(r+e)}}function setDir(e,t){t=="root"?kickstrap.opts.rootDir||(kickstrap.opts.rootDir=e):t=="universal"&&(universals.path=e)}function clearCache(e){var t="w"==(localStorage.setItem="w");t?(localStorage.clear(),consoleLog("Cache has been cleared. Reloading..."),location.reload(!0)):consoleLog("This browser does not support localStorage.","error")}function consoleLog(e,t,n){if(typeof window.consoleLogger=="function")try{consoleLogger(e,t,n)}catch(r){console.error("Kickstrap error. Could not call consoleLog() "+r),console.log(e)}}function formatString(e,t){return e=String(e),t?(e=String(e),e=e.replace(/\\'/g,"'"),e=e.replace(/\\"/g,'"'),e=e.replace(/\\0/g,"\0"),e=e.replace(/\\\\/g,"\\"),e=e.substring(1,e.length-1)):e=e.replace(/['"]/g,""),e=e.replace(/br-/ig,";"),e}function themeFunction(e){$.ajax({type:"GET",url:kickstrap.opts.rootDir+"Kickstrap/themes/"+e+"/functions.js",dataType:"script",context:self})}function setupKickstrap(){function t(){var e=-1;if(navigator.appName=="Microsoft Internet Explorer"){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");n.exec(t)!=null&&(e=parseFloat(RegExp.$1))}return e}var e=t();e>-1&&(e<9?(contentHack.selectorName="ie8",contentHack.hackMode="ie8"):e>=9||(contentHack.selectorName="content"));if($("#appList").css("content")=="normal"||$("#appList").css("content")==undefined){contentHack.selectorName=="ie8";if($("#appList").css("ie8")==undefined||$("#appList").css("ie8")==""){var n="";contentHack.hackMode="loop";for(i=0;i<document.styleSheets.length;i++)for(j=0;j<document.styleSheets[i].rules.length;j++){var r=document.styleSheets[i].rules[j].selectorText;if(r=="#appList")kickstrap.opts.apps=kickstrap.opts.apps.concat(formatString(document.styleSheets[i].rules[j].style.content,!0).splitCSV());else if(r=="script#rootDir"||r=="script#console"||r=="script#caching")n+=formatString(document.styleSheets[i].rules[j].style.content,!0)}document.write(n)}}document.write('<script id="rootDir" type="text/javascript">appendMagic(\'#rootDir\');</script><script id="themeFunctions">appendMagic(\'#themeFunctions\');</script><script id="console" type="text/javascript">appendMagic(\'#console\');</script><script id="caching" type="text/javascript">appendMagic(\'#caching\');initKickstrap();</script>')}function appendMagic(e){if(contentHack.hackMode!="loop"){var t=formatString($(e).css(contentHack.selectorName),!0);if(t=="ndefine"||t=="on")t="<script></script>";document.write(t)}}function initKickstrap(){!universals.isSet&&universals.path=="none"&&(universals.isSet=!0);if(universals.isSet){contentHack.hackMode!="loop"&&(kickstrap.opts.apps=kickstrap.opts.apps.concat(formatString($("#appList").css(contentHack.selectorName)).splitCSV()));for(i=0;i<kickstrap.opts.apps.length;i++)theapp=kickstrap.opts.apps[i],theapp.isIgnored()?(theapp!="",kickstrap.opts.apps.remove(i),i--):window[kickstrap.opts.apps[i]]=new app(theapp)}else universal=new app("universal")}function cssIfy(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),document.getElementsByTagName("body")[0].appendChild(t)}function app(e){function t(t){var n=t[0].splitCSV();for(i=0;i<n.length;i++)n[i].isIgnored()&&n.splice(n.indexOf(n[i]),1);window[e].resourcesRequired=n;if(t[1]){var s=t[1].splitCSV();for(i=0;i<s.length;i++)s[i].isIgnored()&&s.splice(s.indexOf(s[i]),1);window[e].resourcesDependent=s}appArray.push(window[e]),universals.isSet||r(),appArray.length==kickstrap.opts.apps.length&&r()}function n(){universals.isSet=!0,appArray=[],initKickstrap(),universal.loaded=!0}function r(){universals.isSet&&kickstrap.opts.apps.length>0&&(appCheck=!0);for(i=0;i<appArray.length||function(){!universals.isSet&&appArray[0].countRequired[1]==0&&n()}();i++){appArray[i].countRequired[0]=0,contentHack.hackMode!="ie8"&&consoleLog("Kickstrap: "+appArray[i].name,null,appArray[i]);for(j=0;j<appArray[i].resourcesRequired.length;j++){var e=appArray[i].resourcesRequired[j],t=extrasPath+appArray[i].name+"/"+e;e.isPublic()&&(t=e),e.isIgnored()||(e.isJS()?$.ajax({type:"GET",url:t,dataType:"script",context:this,beforeSend:function(e,t){e.thisIs=appArray[i],e.thisIs.countRequired[1]++},success:function(e,t,n){var r=n.thisIs;r.countRequired[0]++;if(r.countRequired[0]==r.countRequired[1]){universals.isSet||(universals.isSet=!0,appArray=[],initKickstrap(),universal.loaded=!0,universal.countDependent=[0,0]),r.countDependent[0]=0,kickstrapReady(r.name);for(k=0;k<r.resourcesDependent.length;k++){var i=extrasPath+r.name+"/"+r.resourcesDependent[k];r.resourcesDependent[k].isPublic()&&(i=r.resourcesDependent[k]),i.isJS()?$.ajax({type:"GET",url:i,dataType:"script",context:this,beforeSend:function(e,t){e.thisIs=r,e.thisIs.countDependent[1]++},success:function(e,t,n){var r=n.thisIs;r.countDependent[0]++,kickstrapReady(r.name)}}):(r.countDependent[0]++,r.countDependent[1]++,cssIfy(i))}}}}):(appArray[i].countRequired[0]++,appArray[i].countRequired[1]++,cssIfy(t)))}}}this.resourcesRequired=[],this.resourcesDependent=[],this.countRequired=[999,0],this.countDependent=[999,0],this.name=e,this.loaded=!1,extrasPath=kickstrap.opts.rootDir+"Kickstrap/apps/",this.configPath=extrasPath+e+"/config.ks";if(e.substring(0,5)=="http:"||e.substring(0,6)=="https:")this.configPath=e;!universals.isSet&&universals.path!="local"&&universals.path!=undefined&&(this.configPath=universals.path+"/universal/config.ks"),$.ajax({type:"GET",url:this.configPath,dataType:"html",context:self,success:function(e){this.resources=e.split(/\r\n|\n/),t(this.resources)},error:function(t,n,r){consoleLog('"'+e+'"? Are you sure you spelled that correctly? ['+t.status+" ("+r+")]","error")}})}function kickstrapReady(e){function r(){if(!readyFired){readyFired=!0,kickstrap.testParams.readyCount++,consoleLog("Executing kickstrap.ready() functions");for(i=0;i<kickstrap.readyFxs.length;i++)kickstrap.readyFxs[i]()}}if(appCheck){this.loadedLoop=[];for(i=0;i<appArray.length||function(){this.loadedLoop.every(Boolean)&&r()}();i++){var t=appArray[i].countRequired,n=appArray[i].countDependent;t[0]==t[1]&&n[0]==n[1]?appArray[i].loaded=!0:appArray[i].loaded=!1,this.loadedLoop.push(appArray[i].loaded)}}}if(!kickstrap)var kickstrap={};kickstrap.opts||(kickstrap.opts={}),kickstrap.opts.apps||(kickstrap.opts.apps=[]);if(!kickstrap.opts.console||typeof kickstrap.opts.console!="boolean")kickstrap.opts.console=!1;var contentHack={selectorName:"content",hackMode:"content-in"},self=this,extrasPath,appArray=[],universals={isSet:!1,path:undefined},readyFired=!1,appCheck=!1,thisVersion="1.2.0 Beta";window.console||(console={log:function(){}}),String.prototype.isIgnored=function(){return this.substr(0,2)=="//"||this==""},String.prototype.isPublic=function(){return this.substr(0,5)=="http:"||this.substr(0,6)=="https:"},String.prototype.isJS=function(){return this.substr(this.length-3,this.length)==".js"},String.prototype.unFuckURL||(String.prototype.unFuckURL=function(){var e=this,t=location.href.match(/^(.+)\/?(?:#.+)?$/)[0]+"/";if(e.substring(0,2)=="//")return location.protocol+e;if(e.charAt(0)=="/")return location.protocol+"//"+location.host+e;if(e.substring(0,2)=="./")e="."+e;else if(/^\s*$/.test(e))return"";var n=0;while(/\/\.\.\//.test(e=e.replace(/[^\/]+\/+\.\.\//g,"")));return e=e.replace(/\.$/,"").replace(/\/\./g,"").replace(/"/g,"%22").replace(/'/g,"%27").replace(/</g,"%3C").replace(/>/g,"%3E"),e}),Array.prototype.remove=function(e,t){var n=this.slice((t||e)+1||this.length);return this.length=e<0?this.length+e:e,this.push.apply(this,n)},String.prototype.splitCSV=function(e){for(var t=this.split(e=e||","),n=t.length-1,r;n>=0;n--)t[n]=t[n].replace(/ /g,""),t[n].replace(/"\s+$/,'"').charAt(t[n].length-1)=='"'?(r=t[n].replace(/^\s+"/,'"')).length>1&&r.charAt(0)=='"'?t[n]=t[n].replace(/^\s*"|"\s*$/g,"").replace(/""/g,'"'):n?t.splice(n-1,2,[t[n-1],t[n]].join(e)):t=t.shift().split(e).concat(t):t[n].replace(/""/g,'"');return t},"every"in Array.prototype||(Array.prototype.every=function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&!e.call(t,this[n],n,this))return!1;return!0}),kickstrap.hello="Kickstrap: Hi! ("+thisVersion+")",kickstrap.edit=function(){document.body.contentEditable="true",document.designMode="on",void 0,typeof window.$.pnotify=="function"&&$.pnotify({title:"Prototyping Mode",text:"You can now edit anything in this page. (But it won't be saved!)",type:"success",styling:"bootstrap"})},kickstrap.readyFxs=[],kickstrap.ready=function(e){this.readyFxs.push(e)},kickstrap.testParams={readyCount:0},setupKickstrap();